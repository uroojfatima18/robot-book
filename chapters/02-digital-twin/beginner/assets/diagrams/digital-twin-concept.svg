<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2196F3"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#fafafa"/>

  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">Digital Twin System Architecture</text>

  <!-- Physical Robot Box -->
  <rect x="50" y="100" width="280" height="280" rx="10" fill="#E3F2FD" stroke="#2196F3" stroke-width="2"/>
  <text x="190" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565C0">PHYSICAL WORLD</text>

  <!-- Robot Icon -->
  <rect x="140" y="160" width="100" height="120" rx="5" fill="#fff" stroke="#2196F3" stroke-width="2"/>
  <circle cx="165" cy="185" r="10" fill="#2196F3"/>
  <circle cx="215" cy="185" r="10" fill="#2196F3"/>
  <rect x="160" y="210" width="60" height="50" fill="#BBDEFB"/>
  <text x="190" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">Humanoid Robot</text>

  <!-- Physical Components -->
  <rect x="70" y="320" width="80" height="40" rx="5" fill="#fff" stroke="#666" stroke-width="1"/>
  <text x="110" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">Sensors</text>

  <rect x="170" y="320" width="80" height="40" rx="5" fill="#fff" stroke="#666" stroke-width="1"/>
  <text x="210" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">Actuators</text>

  <!-- Virtual Robot Box -->
  <rect x="470" y="100" width="280" height="280" rx="10" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="610" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2E7D32">VIRTUAL WORLD</text>

  <!-- Gazebo Robot Icon -->
  <rect x="560" y="160" width="100" height="120" rx="5" fill="#fff" stroke="#4CAF50" stroke-width="2" stroke-dasharray="5,3"/>
  <circle cx="585" cy="185" r="10" fill="#4CAF50" fill-opacity="0.7"/>
  <circle cx="635" cy="185" r="10" fill="#4CAF50" fill-opacity="0.7"/>
  <rect x="580" y="210" width="60" height="50" fill="#C8E6C9"/>
  <text x="610" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#333">Gazebo Simulation</text>

  <!-- Virtual Components -->
  <rect x="490" y="320" width="80" height="40" rx="5" fill="#fff" stroke="#666" stroke-width="1"/>
  <text x="530" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">Physics</text>

  <rect x="590" y="320" width="80" height="40" rx="5" fill="#fff" stroke="#666" stroke-width="1"/>
  <text x="630" y="345" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#333">Sim Sensors</text>

  <!-- Bridge Node (Center) -->
  <rect x="340" y="180" width="120" height="80" rx="10" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
  <text x="400" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100">ROS 2</text>
  <text x="400" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#E65100">Bridge</text>
  <text x="400" y="250" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">&lt;50ms latency</text>

  <!-- Bidirectional Arrows -->
  <!-- Physical to Bridge -->
  <line x1="330" y1="200" x2="345" y2="200" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <line x1="345" y1="240" x2="330" y2="240" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead-blue)"/>

  <!-- Bridge to Virtual -->
  <line x1="460" y1="200" x2="475" y2="200" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="475" y1="240" x2="460" y2="240" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Data Labels -->
  <text x="400" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#666">/joint_states, /cmd_vel, /imu</text>

  <!-- Legend -->
  <rect x="50" y="430" width="700" height="50" rx="5" fill="#fff" stroke="#ddd"/>
  <text x="70" y="460" font-family="Arial, sans-serif" font-size="12" fill="#333">Legend:</text>
  <line x1="140" y1="455" x2="180" y2="455" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <text x="190" y="460" font-family="Arial, sans-serif" font-size="11" fill="#333">Physical → Bridge</text>
  <line x1="320" y1="455" x2="360" y2="455" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="370" y="460" font-family="Arial, sans-serif" font-size="11" fill="#333">Bridge → Virtual</text>
  <rect x="500" y="445" width="20" height="20" rx="3" fill="#FFF3E0" stroke="#FF9800"/>
  <text x="530" y="460" font-family="Arial, sans-serif" font-size="11" fill="#333">Sync Layer (ROS 2)</text>

  <!-- RTF Indicator -->
  <rect x="680" y="100" width="70" height="30" rx="5" fill="#4CAF50"/>
  <text x="715" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#fff">RTF ≥ 0.8</text>
</svg>
